<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IsRayNotArray gh-pages</title>
  <link rel="stylesheet" href="./style.css">
  <style>
    @keyframes blink {
      0% { opacity: 1; }
      50% { opacity: 0.3; }
      100% { opacity: 1; }
    }

    /* RWD 設定 */
    @media screen and (max-width: 768px) {
      /* 頁首設定 */
      header {
        flex-direction: row;
      }
      
      .nav-buttons {
        gap: 0;
        align-items: center;
        /* height: 10%; */
        margin: 0;
        flex-direction: row;
        width: 100%;
        height: 100%;
        justify-content: center;
        align-items: center;
      }
      
      .nav-buttons button {
        font-size: 1rem;
        
        width: 30%;  /* 設定每個按鈕佔 30% 寬度 */
      }
      
      /* 內容區塊設定 */
      .intro-container {
        padding: 10px;
        margin: 10px;
        width: 90%;
      }

      #parking-image{
        width: 304px;
        height: 215px;
      }
      
      
      /* 頁尾設定 */
      .footer-container {
        flex-direction: column;
        text-align: center;
      }
      
      .footer-images {
        justify-content: center;
        margin-bottom: 20px;
      }
      
      .footer-contact {
        width: 100%;
        padding: 0 10px;
      }
      
      .contact-item {
        justify-content: center;
      }

      .parking-marker {
        font-size: 1rem;
      }

    }
    
    @media screen and (max-width: 480px) {
      /* 更小螢幕的額外設定 */
      .intro-container h2,
      .parking-info-container h2 {
        font-size: 1.5em;
      }

      .nav-buttons button {
        font-size: 1rem;
        width: 30%;  /* 設定每個按鈕佔 30% 寬度 */
      }

      .header-images{
        display: none;
      }
      
      .footer-logo {
        width: 80px;
        height: auto;
      }
      

    }
    
    .parking-marker {
      position: absolute;
      font-weight: bold;
    }
    
    .parking-marker.highlight {
      animation: blink 1s infinite;
      color:transparent;
      font-weight: bold;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- 添加 Bootstrap Icons CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
  <header>
    <div class="header-images">
      <img src="./images/mvdlogo.png" alt="Logo 1" class="footer-logo">
    </div>
    <div class="nav-buttons">
      <button onclick="scrollToSection('intro-section')">簡介</button>
      <button onclick="scrollToSection('search-section')">座位查詢</button>
      <button onclick="scrollToSection('parking-info-section')">停車場資訊</button>
    </div>
  </header>

  <main >
    <section class="intro-section">
      <div class="intro-container">
        <h2>200席家宴</h2>
        <div class="intro-content">
          <p>簡介內容</p>
          <p>旅行中，特別地想款待味覺，在桂田的飲食時光，是身體認同的印記。時空流轉，在味覺的邊境上，桂田獨特的飲食風格，展現台南城市文化的力量，會讓您依然記得，那就是廚房裡的桂田職人們用精神與雙手，帶來旅途中酒足飯飽的那一刻。</p>

        </div>
      </div>
    </section>

    <section class="search-section" style="background-color: #ffffff;">
      <div class="search-container">
        <label for="nameInput">姓名:</label>
        <input type="text" id="nameInput" placeholder="輸入姓名">
        <button id="submitBtn">查找位置</button>
      </div>
      
      <div id="image-container" style="position: relative; width: 439px; height: 332px;">
        <img src="./images/result_with_circles.jpg" alt="空白圖片" style="width: 439px; height: 332px;">
        <div id="marker" style="position: absolute; display: none; width: 40px; height: 40px; border: 2px solid yellow; background-color: transparent; border-radius: 50%; transform: translate(-50%, -50%); animation: blink 1s infinite;"></div>
      </div>
      <div class="search-result">
        <p id="search-result">
          
        </p>
      </div>
    </section>

    <section class="parking-info-section">
      <div class="parking-info-container">
        <h2>停車場資訊</h2>
        <div id="parking-image-container" >
          <img id="parking-image" src="./images/park_v1.jpg" alt="空白圖片" >
          <a href="https://reurl.cc/zpanl6" target="_blank">
            <!-- 470 332 -->
            <div class="parking-marker" style="left: 77%; top: 50%;">P1</div>
          </a>
          <a href="https://reurl.cc/748zkD" target="_blank">
            <div class="parking-marker" style="left: 50%; top: 31%">P2</div>
          </a>
          <a href="https://reurl.cc/lNWKrA" target="_blank">
            <div class="parking-marker" style="left: 25%; top: 40%;">P3</div>
          </a>
          <a href="https://reurl.cc/geAXrp" target="_blank">
            <div class="parking-marker" style="left: 15%; top: 70%;">P4</div>
          </a>
          <a href="https://reurl.cc/zpanl6" target="_blank">
            <div class="parking-marker" style="left: 65%; top: 75%">P5</div>
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-container">
      <!-- 左側圖片區 -->
      <div class="footer-images">
        <img src="./images/mvdlogo.png" alt="Logo 1" class="footer-logo">
        <img src="./images/mvdlogo_P.png" alt="Logo 2" class="footer-logo">
      </div>
      
      <!-- 聯絡資訊區 -->
      <div class="footer-contact">
        <div class="contact-item">
          <i class="bi bi-telephone-fill"></i>
          <span><b>電話：</b>(06) 2793725</span>
        </div>
        <div class="contact-item">
          <i class="bi bi-geo-alt-fill"></i>
          <span><b>地址：</b>台南市東區東門路三段253號10樓之1</span>
        </div>
        <div class="contact-item">
          <i class="bi bi-envelope-fill"></i>
          <span><b>信箱：</b>mvd.sales@metavision.tw</span>
        </div>
        
        
      <!-- 版權資訊 -->
        <p>&copy; Copyright © 2025 台南桂田酒店 All Rights Reserved.Design by Metavision </p>
      </div>
      <!-- <div class="footer-images">
        
        <div class="line-item">
          <img src="./images/lineQRcode.png" alt="Logo 2" class="footer-logo" style="width: 100px; height: 100px;">
        </div>
        <div class="contact-item">
          <i class="bi bi-line"></i>
          <span><b>LINE：</b> @997mujfs </span>
        </div>
      </div> -->
  </footer>

  <script>
    let nameCoordinates = {};

    // 從 GitHub 讀取座標資料
    $.ajax({
      url: 'https://raw.githubusercontent.com/mason099203/0331/main/src/123.json',
      method: 'GET',
      success: function(response) {
        try {
          nameCoordinates = JSON.parse(response);
          console.log('成功載入座標數據:', nameCoordinates);
        } catch (e) {
          console.error('解析數據失敗:', e);
        }
      },
      error: function(xhr, status, error) {
        console.error('讀取座標資料失敗:', error);
      }
    });

    $(document).ready(function() {
      $('#submitBtn').click(function() {
        const inputValue = $('#nameInput').val().trim();
        const marker = $('#marker');
        const searchResult = $('#search-result');
        
        // 先清空之前的結果
        marker.hide();
        searchResult.empty();
        
        // 在 nameCoordinates 中查找對應的資料
        const foundPerson = Object.values(nameCoordinates).find(person => 
          person.name.toString() === inputValue
        );
        
        if (foundPerson) {
          // 重置所有停車場標記的樣式
          $('.parking-marker').removeClass('highlight');
          
          // 高亮顯示對應的停車場標記
          $(`.parking-marker:contains('P${foundPerson.park}')`).addClass('highlight');
          
          // 顯示標記
          marker.css({
            'left': `${foundPerson.x}px`,
            'top': `${foundPerson.y}px`,
            'display': 'block'
          });
          
          // 找出同桌的人
          const sameTablePersons = Object.values(nameCoordinates)
            .filter(person => person.table === foundPerson.table)
            .map(person => person.name)
            .join(', ');
          
          // 建立完整的搜尋結果 HTML
          const resultHtml = `
            <table>
              <tr>
                <th>編號</th>
                <th>座位</th>
                <th>桌次</th>
                <th>停車場</th>
              </tr>
              <tr>
                <td>${foundPerson.ID}</td>
                <td>${foundPerson.name}</td>
                <td>${foundPerson.table}桌</td>
                <td>P${foundPerson.park}</td>
              </tr>
            </table>
            <div class="table-members">
              <p>同桌編號：${sameTablePersons}</p>
            </div>
          `;
          
          // 更新搜尋結果區域
          searchResult.html(resultHtml);
        } else {
          alert('查無此編號的桌位。');
          marker.hide();
          searchResult.empty();
          // 清除所有高亮顯示
          $('.parking-marker').removeClass('highlight');
        }
        
        // 清空輸入框
        $('#nameInput').val('');
      });
    });

    // 新增滾動功能
    function scrollToSection(sectionClass) {
      const section = document.querySelector('.' + sectionClass);
      const headerHeight = document.querySelector('header').offsetHeight;
      const elementPosition = section.getBoundingClientRect().top + window.pageYOffset;
      
      window.scrollTo({
        top: elementPosition - headerHeight,
        behavior: 'smooth'
      });
    }
  </script>
</body>
</html>
