<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>天地心，起厝情 傳承愛，慶功宴</title>
  
  <!-- 新增 favicon 設定 -->
  <link rel="icon" type="image/x-icon" href="https://www.greaten.com.tw/images/favicon.ico">
  <link rel="stylesheet" href="./style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- 添加 Bootstrap Icons CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
  <div class="background-container"></div>
  <header>
    <div class="header-images">
      <a href="https://www.greaten.com.tw/" target="_blank">
        <img src="./images/logo_footer.png" alt="Logo 1" class="footer-logo">
      </a>
    </div>
    <div class="nav-buttons">
      <button onclick="scrollToSection('intro-section')">簡介</button>
      <button onclick="scrollToSection('search-section')">座位查詢</button>
      <button onclick="scrollToSection('parking-info-section')">停車場</button>
    </div>
  </header>

  <main >
    <section class="intro-section">
      <!-- <div class="intro-container"> -->
        <div class="intro-content">
          <div class="intro-title"><div class="intro-title-left"></div><div class="intro-title-center"><h2>天地心，起厝情<br>傳承愛，慶功宴</h2></div><div class="intro-title-right"></div></div>
          <p class="desktop-text">家，是一切的起點。<br>
            在這個充滿祝福與喜悦的時刻，我們誠挚地邀請您参加「桂田大樹」的家宴。<br>
            這次盛宴不僅是為了慶祝桂田大樹故事館的落成、《起厝》新書發行及<br>
            紀錄片微電影的首映，更是我們迎接朱家第一位孫千金誕生的幸福時刻。<br>
            這一切象徵著祝福與希望，讓我們的心更加緊密相連。<br>
            在企業經營的路上，您始終陪伴在側，您的支持與鼓勵是我們前行的動力。<br>
            回首來時路，您無疑是我們最珍貴的家人。<br>
            選擇在老家大社「桂田大樹」舉辦，原因無二，這裡是桂田與朱家擴展的源頭，<br>
            象徵不忘本、飲水思源的精神。<br>
            我們期待與您分享這份溫暖與榮耀，讓祝福在「家聚」的每個角落流淌。<br>
            吹拂輕柔晚風，就著清朗燈光，擺席田園農村，敬備台南道地國宴總舖師<br>
            阿舍辦桌菜及精彩節目，期待與您共度惠風和暢的溫馨家宴。<br>
          </p>
          <p class="mobile-text" >
            家，是一切的起點。<br>
            在這個充滿祝福與喜悦的時刻，<br>
            我們誠挚地邀請您参加「桂田大樹」的家宴。<br>
            這次盛宴不僅是為了慶祝桂田大樹故事館的落成、<br>
            《起厝》新書發行及紀錄片微電影的首映，<br>
            更是我們迎接朱家第一位孫千金誕生的幸福時刻。<br>
            這一切象徵著祝福與希望，讓我們的心更加緊密相連。<br>
            在企業經營的路上，您始終陪伴在側，<br>
            您的支持與鼓勵是我們前行的動力。<br>
            回首來時路，您無疑是我們最珍貴的家人。<br>
            選擇在老家大社「桂田大樹」舉辦，原因無二，<br>
            這裡是桂田與朱家擴展的源頭，<br>
            象徵不忘本、飲水思源的精神。<br>
            我們期待與您分享這份溫暖與榮耀，<br>
            讓祝福在「家聚」的每個角落流淌。<br>
            吹拂輕柔晚風，就著清朗燈光，擺席田園農村，<br>
            敬備台南道地國宴總舖師阿舍辦桌菜及精彩節目，<br>
            期待與您共度惠風和暢的溫馨家宴。<br>
          </p>
          <h4 class="desktop-text" style="line-height: 1.5;">日期：114 年 3 月 21 日 (五) | 16:00-21:00<br>
          地點:桂田大樹 The Greatens (臺南市新市區大社里大社875之1號)<br>
          謹註:來賓請攜邀請函入場 (因場地空間限制，設有人数上限。)</h4>
          <h4 class="mobile-text" style="line-height: 1.5;">日期：114 年 3 月 21 日 (五) | 16:00-21:00<br>
            地點:桂田大樹 The Greatens<br>
            謹註:來賓請攜邀請函入場<br></h4>
          <h4 class="mobile-sign sign-text">桂田集團 董事長<img src="./images/sign.png" alt="空白圖片" >敬邀</h4>
        </div>
    </section>

    <section class="search-section" >
      <div class="search-container">
        <h2 class="desktop-text">座位查詢</h2>
        <h2 class="mobile-text">座位查詢</h2>
        <div>
          <input type="text" id="nameInput" placeholder="請輸入全名" >
          <button id="submitBtn">查找位置</button>
      </div>
      </div>
      <div class="search-result">
        <p id="search-result">
        </p>
      </div>
      <div id="image-container" style="position: relative; width: 439px; height: 332px;">
        <img src="./images/result_with_circles.jpg" alt="空白圖片" style="width: 439px; height: 332px;">
        <div id="marker" style="position: absolute; display: none; width: 40px; height: 40px; border: 2px solid yellow; background-color: transparent; border-radius: 50%; transform: translate(-50%, -50%); animation: blink 1s infinite;"></div>
      </div>
      <br>
      <div id="image-container2" style="display: flex; flex-direction: row; ">
        <div><img id="parking-image2" src="./images/place-2.png" alt="空白圖片" style="width: 513px; height: 200px;cursor: pointer;"></div>
        <div><img id="parking-image3" src="./images/place-1.png" alt="空白圖片" style="width: 527px; height: 200px;cursor: pointer;"></div></div>
      </div>
      
    </section>
    <section class="parking-info-section">
      <div class="parking-info-container">
        <h2 class="desktop-text">貴賓您好，<br>我們有為您規劃停車場停車位置，<br>麻煩請先至座位查詢確認。</h2>
        <h2 class="mobile-text">貴賓您好，<br>我們有為您規劃停車場停車位置，<br>麻煩請先至座位查詢確認。</h2>
        <h2 class = "park-info" style="width: 80%; background-color: white;">點擊座標，即可連結導航</h2>

        <div id="parking-image-container">
          <img id="parking-image" src="./images/park_v1.jpg" alt="空白圖片" style="cursor: pointer;">
          <a href="https://reurl.cc/zpanl6" target="_blank">
            <!-- 470 332 -->
            <div class="parking-marker P1">P1</div>
          </a>
          <a href="https://reurl.cc/748zkD" target="_blank">
            <div class="parking-marker P2">P2</div>
          </a>
          <a href="https://reurl.cc/lNWKrA" target="_blank">
            <div class="parking-marker P3">P3</div>
          </a>
          <a href="https://reurl.cc/04qM9b" target="_blank">
            <div class="parking-marker P4">P4</div>
          </a>
          <a href="https://reurl.cc/geAXrp" target="_blank">
            <div class="parking-marker P5">P5</div>
          </a>
          <a href="https://reurl.cc/46zVj2" target="_blank">
            <div class="parking-marker P6">P6</div>
          </a>
          <a href="https://reurl.cc/46VbyR" target="_blank">
            <div class="parking-marker P7">P7</div>
          </a>
          <a href="https://reurl.cc/kMeKlL" target="_blank">
            <div class="home-marker" ></div>
          </a>
        </div>
        <div class="parking-info-text">
          <table>
            <tr>
              <td colspan="2" ><a href="https://reurl.cc/kMeKlL" target="_blank">宴客宅邸位置</a></td>
            </tr>
            <tr>
              <td class="parking-place" style="width: 100px;">P1</td>
              <td><a href="https://reurl.cc/zpanl6" target="_blank"><div class="mobile-text">P1-富臨科技</div><div class="desktop-text">富臨科技</div></a></td>
            </tr>
            <tr>
              <td class="parking-place" style="width: 100px;">P2</td>
              <td><a href="https://reurl.cc/748zkD" target="_blank"><div class="mobile-text">P2-新市大社西興北極殿</div><div class="desktop-text">新市大社西興北極殿</div></a></td>
            </tr>
            <tr>
              <td class="parking-place" style="width: 100px;">P3</td>
              <td><a href="https://reurl.cc/lNWKrA" target="_blank"><div class="mobile-text">P3-停車場</div><div class="desktop-text">停車場</div></a></td>
            </tr>
            <tr>
              <td class="parking-place" style="width: 100px;">P4</td>
              <td><a href="https://reurl.cc/04qM9b" target="_blank"><div class="mobile-text">P4-月星起重工程有限公司</div><div class="desktop-text">月星起重工程有限公司</div></a></td>
            </tr>
            <tr>
              <td class="parking-place" style="width: 100px;">P5</td>
              <td><a href="https://reurl.cc/geAXrp" target="_blank"><div class="mobile-text">P5-停車場</div><div class="desktop-text">停車場</div></a></td>
            </tr>
            <tr>
              <td class="parking-place" style="width: 100px;">P6</td>
              <td><a href="https://reurl.cc/46zVj2" target="_blank"><div class="mobile-text">P6-好帝一食品有限公司</div><div class="desktop-text">好帝一食品有限公司</div></a></td>
            </tr>
            <tr>
              <td class="parking-place" style="width: 100px;">P7</td>
              <td><a href="https://reurl.cc/46VbyR" target="_blank"><div class="mobile-text">P7-尚聚企業公司</div><div class="desktop-text">尚聚企業公司</div></a></td>
            </tr>
          </table>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div class="footer-container">
      <!-- 左側圖片區 -->
      <div class="footer-images">
        <img src="./images/mvdlogo.png" alt="Logo 1" class="footer-logo">
        <img src="./images/mvdlogo_P.png" alt="Logo 2" class="footer-logo">
      </div>
      
      <!-- 聯絡資訊區 -->
      <div class="footer-contact">
        <div class="contact-item desktop-text">
          <i class="bi bi-telephone-fill"></i>
          <span><b>電話：</b>(06) 2793725</span>
        </div>
        <div class="contact-item mobile-text">
          <i class="bi bi-telephone-fill"></i>
          <span style="font-size: 12px;"><b>電話：</b><br>(06) 2793725</span>
        </div>
        <div class="contact-item desktop-text">
          <i class="bi bi-geo-alt-fill "></i>
          <span><b>地址：</b>台南市東區東門路三段253號10樓之1</span>
        </div>
        <div class="contact-item mobile-text">
          <i class="bi bi-geo-alt-fill "></i>
          <span style="font-size: 12px;"><b>地址：</b><br>台南市東區東門路三段253號10樓之1</span>
        </div>
        <div class="contact-item desktop-text" >
          <i class="bi bi-envelope-fill"></i>
          <span><b>信箱：</b>mvd.sales@metavision.tw</span>
        </div>
        <div class="contact-item mobile-text">
          <i class="bi bi-envelope-fill"></i>
          <span style="font-size: 12px;"><b>信箱：</b><br>mvd.sales@metavision.tw</span>
        </div>
        
        
      <!-- 版權資訊 -->
        <p>&copy; Copyright © 2025 桂田集團 All Rights Reserved.Design by Metavision </p>
      </div>
      <!-- <div class="footer-images">
        
        <div class="line-item">
          <img src="./images/lineQRcode.png" alt="Logo 2" class="footer-logo" style="width: 100px; height: 100px;">
        </div>
        <div class="contact-item">
          <i class="bi bi-line"></i>
          <span><b>LINE：</b> @997mujfs </span>
        </div>
      </div> -->
  </footer>

  <!-- 彈出視窗 -->
  <div id="imageModal" class="modal">
    <img class="modal-content" id="modalImage">
  </div>

  <script>
    let nameCoordinates = {};
    // 從 GitHub 讀取座標資料
    $.ajax({
      url: 'https://raw.githubusercontent.com/mason099203/0331/main/src/1234.json',
      method: 'GET',
      success: function(response) {
        try {
          nameCoordinates = JSON.parse(response);
          // console.log('成功載入座標數據:', nameCoordinates);
        } catch (e) {
          console.error('解析數據失敗:', e);
        }
      },
      error: function(xhr, status, error) {
        console.error('讀取座標資料失敗:', error);
      }
    });

    $(document).ready(function() {
      $('#submitBtn').click(function() {
        $('.markers').remove();
        const inputValue = $('#nameInput').val().trim();
        const marker = $('#marker');
        const searchResult = $('#search-result');
        
        // 先清空之前的結果
        marker.hide();
        searchResult.empty();
        
        // 在 nameCoordinates 中查找對應的資料
        const foundPerson = Object.values(nameCoordinates).find(person => 
          person.name.toString() === inputValue 
        );

        let groupedData = {};

        Object.values(nameCoordinates).forEach(item => {
          let prefix = item.company.slice(0, inputValue.length); // 取前 N 位
          if (prefix === inputValue && inputValue !== '') {
            if (!groupedData[prefix]) {
              groupedData[prefix] = []; // 初始化為陣列
            }
            groupedData[prefix].push(item); // 正確推入資料
          }
        });
        // 將相同前兩位的公司資料合併成一個陣列
        const foundcompany = Object.values(groupedData).find(group => 
          group.some(item => item.company.toString().slice(0, inputValue.length) === inputValue)
        );
        
        if (foundPerson) {
          // 重置所有停車場標記的樣式
          $('.parking-marker').removeClass('highlight');
          // 高亮顯示對應的停車場標記
          $(`.parking-marker:contains('P${foundPerson.park}')`).addClass('highlight');
          // 顯示標記
          marker.css({
            'left': `${foundPerson.x}px`,
            'top': `${foundPerson.y}px`,
            'display': 'block'
          });
          // 建立完整的搜尋結果 HTML
          const resultHtml = `
            <table>
              <tr>
                <th>公司名稱</th>
                <th>座位</th>
                <th>桌次</th>
                <th>人數</th>
                <th>停車場</th>
              </tr>
              <tr>
                <td>${foundPerson.company}</td>
                <td>${foundPerson.name}</td>
                <td>${foundPerson.table}</td>
                <td>${foundPerson.number}</td>
                <td onclick="scrollToSection('parking-info-section')">${foundPerson.park}</td>
              </tr>
              
            </table>
          `;
          searchResult.html(resultHtml);
        }else if(Object.keys(groupedData).length > 0) { // 確保 groupedData 有內容
          
          let resultHtml = `
            <table border="1">
              <tr>
                <th>公司名稱</th>
                <th>座位</th>
                <th>桌次</th>
                <th>人數</th>
                <th>停車場</th>
              </tr>`;

          $('.parking-marker').removeClass('highlight');
          // 遍歷 groupedData 並建立表格內容
          Object.values(groupedData).forEach(companyList => {
            companyList.forEach(foundcompany => {
              $(`.parking-marker:contains('${foundcompany.park}')`).addClass('highlight');
          // 高亮顯示對應的停車場標記
              let newMarker = $('<div class="markers"></div>').css({
                'left': `${foundcompany.x}px`,
                'top': `${foundcompany.y}px`
              });

              $('#image-container').append(newMarker);
              resultHtml += `
                <tr>
                  <td>${foundcompany.company}</td>
                  <td>${foundcompany.name}</td>
                  <td>${foundcompany.table}</td>
                  <td>${foundcompany.number}</td>
                  <td onclick="scrollToSection('parking-info-section')">${foundcompany.park}</td>
                </tr>`;
            });
          });

          resultHtml += `</table>`;
          searchResult.html(resultHtml);
        }else{
          alert('查無此編號的桌位。');
          marker.hide();
          searchResult.empty();
          // 清除所有高亮顯示
          $('.parking-marker').removeClass('highlight');
        }
        
        // 清空輸入框
        $('#nameInput').val('');
      });
    });

    // 新增滾動功能
    function scrollToSection(sectionClass) {
      const section = document.querySelector('.' + sectionClass);
      const headerHeight = document.querySelector('header').offsetHeight;
      const elementPosition = section.getBoundingClientRect().top + window.pageYOffset;
      
      window.scrollTo({
        top: elementPosition - headerHeight,
        behavior: 'smooth'
      });
    }

    // 圖片彈出功能
    const parkingImage = document.getElementById('parking-image');
    const parkingImage2 = document.getElementById('parking-image2');
    const parkingImage3 = document.getElementById('parking-image3');
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');

    parkingImage.onclick = function() {
      modal.style.display = "block";
      modalImg.src = this.src;
    }

    parkingImage2.onclick = function() {
      modal.style.display = "block";
      modalImg.src = this.src;
    }
    parkingImage3.onclick = function() {
      modal.style.display = "block";
      modalImg.src = this.src;
    }
    

    modal.onclick = function() {
      modal.style.display = "none";
    }
  </script>
</body>
</html>
